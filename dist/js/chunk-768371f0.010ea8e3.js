(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-768371f0"],{"0b42":function(t,e,c){var n=c("861d"),o=c("e8b5"),a=c("b622"),r=a("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)?n(e)&&(e=e[r],null===e&&(e=void 0)):e=void 0),void 0===e?Array:e}},"1dde":function(t,e,c){var n=c("d039"),o=c("b622"),a=c("2d00"),r=o("species");t.exports=function(t){return a>=51||!n((function(){var e=[],c=e.constructor={};return c[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"65f0":function(t,e,c){var n=c("0b42");t.exports=function(t,e){return new(n(t))(0===e?0:e)}},"76db":function(t,e,c){"use strict";c.r(e);var n=c("7a23"),o={class:"container"},a={class:"row mt-4"},r={class:"col-md-7"},i={class:"table align-middle"},s=Object(n["h"])("thead",null,[Object(n["h"])("tr",null,[Object(n["h"])("th",null,"圖片"),Object(n["h"])("th",null,"商品名稱"),Object(n["h"])("th",null,"價格"),Object(n["h"])("th")])],-1),u={style:{width:"200px"}},l={href:"#",class:"text-dark"},d={key:0,class:"h5"},b={key:1,class:"h6"},h={key:2,class:"h5"},p={class:"btn-group btn-group-sm"},j=["onClick"],O=["onClick","disabled"],f={key:0,class:"spinner-grow spinner-grow-sm text-danger",role:"status"},g=Object(n["h"])("span",{class:"visually-hidden"},"Loading...",-1),v=[g],y=Object(n["j"])(" 加到購物車 "),m={class:"col-md-5"},x={class:"table"},w=Object(n["h"])("thead",null,[Object(n["h"])("tr",null,[Object(n["h"])("th"),Object(n["h"])("th",null,"產品"),Object(n["h"])("th",null,"數量"),Object(n["h"])("th",null,"價格")])],-1),k=Object(n["h"])("td",null,[Object(n["h"])("button",{type:"button",class:"btn-close btn-outline-danger","aria-label":"Close"})],-1),C={key:0,class:"text-success"},I={class:"input-group input-group-sm",style:{width:"100px"}},L=["onUpdate:modelValue","onChange","disabled"],_={class:"input-group-text"},A={class:"text-end"},P={key:0,class:"text-success"},q=Object(n["h"])("td",{colspan:"3",class:"text-end"},"總計",-1),$={class:"text-end"},U={key:0},V=Object(n["h"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),D={class:"text-end text-success"},E={class:"input-group mb-3 input-group-sm"},J={class:"input-group-append"};function T(t,e,c,g,T,z){var B=this,F=Object(n["F"])("Loading");return Object(n["w"])(),Object(n["g"])(n["a"],null,[Object(n["k"])(F,{active:T.isLoading},null,8,["active"]),Object(n["h"])("div",o,[Object(n["h"])("div",a,[Object(n["h"])("div",r,[Object(n["h"])("table",i,[s,Object(n["h"])("tbody",null,[(Object(n["w"])(!0),Object(n["g"])(n["a"],null,Object(n["D"])(T.products,(function(t){return Object(n["w"])(),Object(n["g"])("tr",{key:t.id},[Object(n["h"])("td",u,[Object(n["h"])("div",{style:Object(n["r"])([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(t.imageUrl,")")}])},null,4)]),Object(n["h"])("td",null,[Object(n["h"])("a",l,Object(n["I"])(t.title),1)]),Object(n["h"])("td",null,[t.price?Object(n["f"])("",!0):(Object(n["w"])(),Object(n["g"])("div",d,Object(n["I"])(t.origin_price)+" 元 ",1)),t.price?(Object(n["w"])(),Object(n["g"])("del",b,"原價 "+Object(n["I"])(t.origin_price)+" 元",1)):Object(n["f"])("",!0),t.price?(Object(n["w"])(),Object(n["g"])("div",h," 現在只要 "+Object(n["I"])(t.price)+" 元 ",1)):Object(n["f"])("",!0)]),Object(n["h"])("td",null,[Object(n["h"])("div",p,[Object(n["h"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(e){return z.getProduct(t.id)}}," 查看更多 ",8,j),Object(n["h"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(e){return z.addCart(t.id)},disabled:B.status.loadingItem===t.id},[B.status.loadingItem===t.id?(Object(n["w"])(),Object(n["g"])("div",f,v)):Object(n["f"])("",!0),y],8,O)])])])})),128))])])]),Object(n["h"])("div",m,[Object(n["h"])("table",x,[w,Object(n["h"])("tbody",null,[T.cart.carts?(Object(n["w"])(!0),Object(n["g"])(n["a"],{key:0},Object(n["D"])(T.cart.carts,(function(t){return Object(n["w"])(),Object(n["g"])("tr",{key:t.id},[k,Object(n["h"])("td",null,[Object(n["j"])(Object(n["I"])(t.product.title)+" ",1),t.coupon?(Object(n["w"])(),Object(n["g"])("div",C," 已套用優惠券 ")):Object(n["f"])("",!0)]),Object(n["h"])("td",null,[Object(n["h"])("div",I,[Object(n["P"])(Object(n["h"])("input",{type:"number",class:"form-control","onUpdate:modelValue":function(e){return t.qty=e},min:"1",onChange:function(e){return z.updateCart(t)},disabled:t.id===T.status.loadingItem},null,40,L),[[n["L"],t.qty,void 0,{number:!0}]]),Object(n["h"])("span",_,Object(n["I"])(t.product.unit),1)])]),Object(n["h"])("td",A,[T.cart.final_total!==T.cart.total?(Object(n["w"])(),Object(n["g"])("small",P,"折扣價:")):Object(n["f"])("",!0),Object(n["j"])(" "+Object(n["I"])(t.final_total),1)])])})),128)):Object(n["f"])("",!0)]),Object(n["h"])("tfoot",null,[Object(n["h"])("tr",null,[q,Object(n["h"])("td",$,Object(n["I"])(t.$filters.currency(T.cart.total)),1)]),T.cart.final_total!==T.cart.total?(Object(n["w"])(),Object(n["g"])("tr",U,[V,Object(n["h"])("td",D,Object(n["I"])(t.$filters.currency(T.cart.final_total)),1)])):Object(n["f"])("",!0)])]),Object(n["h"])("div",E,[Object(n["P"])(Object(n["h"])("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=function(t){return T.coupon_code=t}),placeholder:"請輸入優惠碼"},null,512),[[n["L"],T.coupon_code]]),Object(n["h"])("div",J,[Object(n["h"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=function(){return t.addCouponCode&&t.addCouponCode.apply(t,arguments)})}," 套用優惠碼 ")])])])])])],64)}c("99af");var z={data:function(){return{products:[],product:{},status:{loadingItem:""},cart:{},coupon_code:"",isLoading:!1}},methods:{getProducts:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("john0531-api","/products/all");this.isLoading=!0,this.$http.get(e).then((function(e){t.products=e.data.products,console.log("products:",e),t.isLoading=!1}))},getProduct:function(t){this.$router.push("/user/product/".concat(t))},addCart:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("john0531-api","/cart");this.status.loadingItem=t;var n={product_id:t,qty:1};this.$http.post(c,{data:n}).then((function(t){e.status.loadingItem="",console.log(t)})),this.getCart()},getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("john0531-api","/cart");this.isLoading=!0,this.axios.get(e).then((function(e){console.log(e),t.cart=e.data.data,t.isLoading=!1}))},updateCart:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("john0531-api","/cart/").concat(t.id);this.isLoading=!0,this.status.loadingItem=t.id;var n={product_id:t.product_id,qty:t.qty};this.axios.put(c,{data:n}).then((function(t){e.isLoading=!1,e.status.loadingItem="",console.log(t),e.getCart()}))}},created:function(){this.getProducts(),this.getCart()}};z.render=T;e["default"]=z},8418:function(t,e,c){"use strict";var n=c("a04b"),o=c("9bf2"),a=c("5c6c");t.exports=function(t,e,c){var r=n(e);r in t?o.f(t,r,a(0,c)):t[r]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),o=c("d039"),a=c("e8b5"),r=c("861d"),i=c("7b0b"),s=c("50c4"),u=c("8418"),l=c("65f0"),d=c("1dde"),b=c("b622"),h=c("2d00"),p=b("isConcatSpreadable"),j=9007199254740991,O="Maximum allowed index exceeded",f=h>=51||!o((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),g=d("concat"),v=function(t){if(!r(t))return!1;var e=t[p];return void 0!==e?!!e:a(t)},y=!f||!g;n({target:"Array",proto:!0,forced:y},{concat:function(t){var e,c,n,o,a,r=i(this),d=l(r,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(a=-1===e?r:arguments[e],v(a)){if(o=s(a.length),b+o>j)throw TypeError(O);for(c=0;c<o;c++,b++)c in a&&u(d,b,a[c])}else{if(b>=j)throw TypeError(O);u(d,b++,a)}return d.length=b,d}})},e8b5:function(t,e,c){var n=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);
//# sourceMappingURL=chunk-768371f0.010ea8e3.js.map